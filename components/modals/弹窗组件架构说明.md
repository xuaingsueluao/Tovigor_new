# 弹窗组件架构说明

## 🏗️ 组件层次结构

```
ModalContainerLight（最底层 - 极简容器）
  ↓
ModalContainer（通用容器 - 配置化）
  ↓
业务弹窗组件（ConfirmModal、AlertModal 等）
```

---

## 📦 两个容器组件对比

### 1. ModalContainerLight（最底层、最轻量）

**文件：** `modal-container-light.vue`

**特点：**
- ✅ **极简设计**：只有遮罩层 + 插槽，无任何预设样式
- ✅ **完全自由**：不限制位置、动画、样式，全由你决定
- ✅ **体积最小**：代码量最少，性能最优
- ✅ **最底层**：其他弹窗容器都可以基于它构建

**提供的功能：**
- 遮罩层（无背景色，需自定义）
- 显示/隐藏控制（`v-model:visible`）
- 点击遮罩关闭（`closeOnClickOverlay`）
- `@overlay-click` 事件

**不提供的功能：**
- ❌ 无动画
- ❌ 无位置定位
- ❌ 无宽高圆角配置
- ❌ 无遮罩背景色（需自行设置）

**使用场景：**
- 需要完全自定义样式和动画的弹窗
- 性能要求极高的场景
- 构建其他弹窗容器的基础

**示例：**
```vue
<ModalContainerLight v-model:visible="show">
  <!-- 完全自定义：位置、样式、动画全靠你自己写 -->
  <view class="my-custom-modal" @click.stop>
    自定义内容
  </view>
</ModalContainerLight>

<style>
.my-custom-modal {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  background: white;
  /* 你的自定义样式... */
}
</style>
```

---

### 2. ModalContainer（通用容器、配置化）

**文件：** `modal-container.vue`

**特点：**
- ✅ **开箱即用**：提供常见配置，快速上手
- ✅ **灵活配置**：位置、动画、宽高、圆角等可调
- ✅ **标准化**：统一的弹窗样式和行为
- ✅ **插槽支持**：header、default、footer 三区域

**提供的功能：**
- 遮罩层（可配置透明度、zIndex）
- 位置定位（center、top、bottom）
- 动画效果（fade、slide、zoom）
- 样式配置（width、maxHeight、borderRadius、backgroundColor）
- 点击遮罩关闭
- 完整的事件系统

**使用场景：**
- 大部分常规弹窗需求
- 需要快速开发的场景
- 团队协作需要统一规范

**示例：**
```vue
<ModalContainer 
  v-model:visible="show"
  position="center"
  animation="zoom"
  :width="600"
  :border-radius="32"
>
  <view class="content">
    只需关注内容，样式已配置好
  </view>
</ModalContainer>
```

---

## 🎯 如何选择？

| 场景 | 推荐组件 | 原因 |
|------|---------|------|
| 常规业务弹窗 | ✅ ModalContainer | 配置即用，快速开发 |
| 需要特殊动画效果 | ✅ ModalContainerLight | 完全自定义 |
| 需要不规则布局 | ✅ ModalContainerLight | 不受位置限制 |
| 团队协作项目 | ✅ ModalContainer | 统一规范 |
| 构建弹窗组件库 | ✅ ModalContainerLight | 作为基础层 |
| 快速原型开发 | ✅ ModalContainer | 减少样式代码 |

---

## 📋 实际使用建议

### 推荐做法：优先使用 ModalContainer

**99% 的场景用 ModalContainer 就够了：**
```vue
<!-- 大部分弹窗都可以这样写 -->
<ModalContainer v-model:visible="show" animation="zoom">
  <view class="my-content">
    <!-- 业务内容 -->
  </view>
</ModalContainer>
```

### 仅在以下情况使用 ModalContainerLight：

1. **需要非标准动画**（如旋转、3D 效果等）
2. **需要不规则定位**（如跟随鼠标、自适应位置等）
3. **构建自己的弹窗容器**（基于 Light 封装自己的 Container）
4. **极端性能优化**（减少不必要的代码）

---

## 🔧 迁移指南

### 从 BaseModal 迁移到 ModalContainer

**代码无需修改，只需改名：**
```vue
<!-- 旧代码 -->
<BaseModal v-model:visible="show">

<!-- 新代码（只改导入和组件名） -->
<ModalContainer v-model:visible="show">
```

**导入语句：**
```javascript
// 旧
import BaseModal from '@/components/base-modal.vue'

// 新
import ModalContainer from '@/components/modal-container.vue'
```

---

## 📦 现有项目组件清单（更新）

| 组件名 | 类型 | 层级 | 建议 |
|--------|------|------|------|
| `modal-container-light.vue` | 轻量容器 | 🔹 最底层 | 特殊需求时使用 |
| `modal-container.vue` | 通用容器 | 🔸 中间层 | **未来所有新弹窗优先使用** |
| `modal-general.vue` | 业务弹窗 | 🔶 业务层 | 可保留，简单场景使用 |
| `assessment-complete-modal.vue` | 业务弹窗 | 🔶 业务层 | 工作正常可保留 |

---

## 🎉 总结

- **ModalContainerLight** = 最薄、最自由、最底层（你想怎么玩就怎么玩）
- **ModalContainer** = 配置化、标准化、开箱即用（推荐日常使用）
- **业务弹窗** = 基于容器封装的具体功能组件

**记住：先用 ModalContainer，不够用再考虑 ModalContainerLight！**
