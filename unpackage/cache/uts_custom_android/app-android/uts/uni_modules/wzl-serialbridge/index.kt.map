{"version":3,"sources":["uni_modules/wzl-serialbridge/utssdk/app-android/index.uts","uni_modules/wzl-serialbridge/interface.uts","uni_modules/wzl-serialbridge/unierror.uts"],"sourcesContent":["/**\r\n * wzl-serialbridge Android 平台实现\r\n * 基于 Kotlin SerialPort AAR 封装\r\n */\r\n\r\n// 探针函数 - 用于验证导出机制\r\nexport function __probe(): number {\r\n  return 42\r\n}\r\n\r\n// 导入接口定义(仅用于类型约束)\r\nimport type {\r\n  OpenOptions,\r\n  OpenResult,\r\n  WriteOptions,\r\n  WriteResult,\r\n  ReadOptions,\r\n  ReadResult,\r\n  CloseOptions,\r\n  CloseResult,\r\n  ListDevicesOptions,\r\n  ListDevicesResult\r\n} from '../../interface.uts'\r\n\r\n// 导入错误类\r\nimport { SerialErrorImpl } from '../../unierror.uts'\r\n\r\n// 导入 Kotlin AAR 中的类 - 使用全限定类名 + 默认导入\r\nimport SerialPort from 'com.example.serialbridge.SerialPort'\r\nimport SerialConfig from 'com.example.serialbridge.SerialConfig'\r\nimport DataBits from 'com.example.serialbridge.DataBits'\r\nimport StopBits from 'com.example.serialbridge.StopBits'\r\nimport Parity from 'com.example.serialbridge.Parity'\r\nimport File from 'java.io.File'\r\nimport IOException from 'java.io.IOException'\r\nimport Base64 from 'android.util.Base64'\r\n\r\n// ==================== 全局状态管理 ====================\r\n\r\n/**\r\n * 串口实例池，key 为句柄 ID\r\n */\r\nconst serialPorts: Map<Int, SerialPort> = new Map()\r\n\r\n/**\r\n * 句柄 ID 计数器\r\n */\r\nlet portIdCounter: Int = 1\r\n\r\n/**\r\n * 生成新的串口句柄 ID\r\n */\r\nfunction generatePortId(): Int {\r\n  return portIdCounter++\r\n}\r\n\r\n// ==================== 工具函数 ====================\r\n\r\n/**\r\n * 解析校验位字符串为枚举\r\n */\r\nfunction parseParity(parity: string): Parity {\r\n  switch (parity.toLowerCase()) {\r\n    case 'odd':\r\n      return Parity.ODD\r\n    case 'even':\r\n      return Parity.EVEN\r\n    default:\r\n      return Parity.NONE\r\n  }\r\n}\r\n\r\n/**\r\n * HEX 字符串转字节数组\r\n */\r\nfunction hexToBytes(hex: string): ByteArray {\r\n  const cleanHex = hex.replace(/\\s+/g, '').replace(/^0x/i, '')\r\n  const len: Int = cleanHex.length.toInt()\r\n  const bytes = new ByteArray((len / 2).toInt())\r\n  \r\n  for (let i = 0; i < len; i += 2) {\r\n    const start: Int = i.toInt()\r\n    const end: Int = (i + 2).toInt()\r\n    const byte = parseInt(cleanHex.substring(start, end), 16)\r\n    bytes[(i / 2).toInt()] = byte.toByte()\r\n  }\r\n  \r\n  return bytes\r\n}\r\n\r\n/**\r\n * 字节数组转 HEX 字符串\r\n */\r\nfunction bytesToHex(bytes: ByteArray, length: number): string {\r\n  const hexChars = \"0123456789ABCDEF\"\r\n  const n: Int = length.toInt()\r\n  let result = \"\"\r\n  \r\n  for (let i = 0; i < n; i++) {\r\n    const idx: Int = i.toInt()\r\n    const v = (bytes[idx].toInt() & 0xFF)\r\n    result += hexChars[(v >> 4)]\r\n    result += hexChars[(v & 0x0F)]\r\n  }\r\n  \r\n  return result\r\n}\r\n\r\n/**\r\n * Base64 字符串转字节数组\r\n */\r\nfunction base64ToBytes(base64: string): ByteArray {\r\n  return Base64.decode(base64, Base64.DEFAULT)\r\n}\r\n\r\n/**\r\n * 字节数组转 Base64 字符串\r\n */\r\nfunction bytesToBase64(bytes: ByteArray, length: number): string {\r\n  const trimmedBytes = bytes.copyOf(length.toInt())\r\n  return Base64.encodeToString(trimmedBytes, Base64.DEFAULT)\r\n}\r\n\r\n// ==================== API 实现 ====================\r\n\r\n/**\r\n * 打开串口\r\n */\r\nexport function openSerial(options: OpenOptions) {\r\n  try {\r\n    // 参数校验\r\n    if (options.path == null || options.path.length == 0) {\r\n      const err = new SerialErrorImpl(10006)\r\n      err.errMsg = \"设备路径不能为空\"\r\n      options.fail?.(err)\r\n      options.complete?.(err)\r\n      return\r\n    }\r\n\r\n    // 构建配置对象\r\n    const config = options.config ?? {}\r\n    const baudRate = config.baudRate ?? 115200\r\n    const dataBitsValue = config.dataBits ?? 8\r\n    const stopBitsValue = config.stopBits ?? 1\r\n    const parityValue = config.parity ?? 'none'\r\n\r\n    // 转换为 Kotlin 枚举\r\n    let dataBits: DataBits\r\n    if (dataBitsValue == 5) {\r\n      dataBits = DataBits.DATA_BITS_5\r\n    } else if (dataBitsValue == 6) {\r\n      dataBits = DataBits.DATA_BITS_6\r\n    } else if (dataBitsValue == 7) {\r\n      dataBits = DataBits.DATA_BITS_7\r\n    } else {\r\n      dataBits = DataBits.DATA_BITS_8\r\n    }\r\n\r\n    let stopBits: StopBits\r\n    if (stopBitsValue == 2) {\r\n      stopBits = StopBits.STOP_BITS_2\r\n    } else {\r\n      stopBits = StopBits.STOP_BITS_1\r\n    }\r\n\r\n    const parity = parseParity(parityValue)\r\n\r\n    // 创建配置对象 - 将 Number 转为 Int\r\n    const serialConfig = SerialConfig(baudRate.toInt(), dataBits, stopBits, parity)\r\n\r\n    // 打开串口\r\n    const serialPort = SerialPort(options.path, serialConfig)\r\n\r\n    // 生成句柄 ID 并保存\r\n    const portId = generatePortId()\r\n    serialPorts.set(portId, serialPort)\r\n\r\n    // 返回成功结果\r\n    const res: OpenResult = {\r\n      errMsg: \"openSerial:ok\",\r\n      portId: portId\r\n    }\r\n    options.success?.(res)\r\n    options.complete?.(res)\r\n\r\n  } catch (e: Exception) {\r\n    const err = new SerialErrorImpl(10001)\r\n    err.errMsg = \"打开串口失败: \" + e.message\r\n    options.fail?.(err)\r\n    options.complete?.(err)\r\n  }\r\n}\r\n\r\n/**\r\n * 写入数据\r\n */\r\nexport function writeSerial(options: WriteOptions) {\r\n  try {\r\n    // 获取串口实例\r\n    const serialPort = serialPorts.get(options.portId.toInt())\r\n    if (serialPort == null) {\r\n      const err = new SerialErrorImpl(10005)\r\n      err.errMsg = \"串口未打开，请先调用 openSerial\"\r\n      options.fail?.(err)\r\n      options.complete?.(err)\r\n      return\r\n    }\r\n\r\n    // 数据格式转换\r\n    const format = options.format ?? 'hex'\r\n    let dataBytes: ByteArray\r\n\r\n    if (format == 'hex') {\r\n      dataBytes = hexToBytes(options.data)\r\n    } else if (format == 'base64') {\r\n      dataBytes = base64ToBytes(options.data)\r\n    } else {\r\n      const err = new SerialErrorImpl(10007)\r\n      err.errMsg = \"不支持的数据格式: \" + format\r\n      options.fail?.(err)\r\n      options.complete?.(err)\r\n      return\r\n    }\r\n\r\n    // 写入数据\r\n    const timeout = options.timeout ?? 1000\r\n    const bytesWritten = serialPort.write(dataBytes, timeout.toInt())\r\n\r\n    // 返回成功结果\r\n    const res: WriteResult = {\r\n      errMsg: \"writeSerial:ok\",\r\n      bytesWritten: bytesWritten\r\n    }\r\n    options.success?.(res)\r\n    options.complete?.(res)\r\n\r\n  } catch (e: Exception) {\r\n    const err = new SerialErrorImpl(10002)\r\n    err.errMsg = \"写入数据失败: \" + e.message\r\n    options.fail?.(err)\r\n    options.complete?.(err)\r\n  }\r\n}\r\n\r\n/**\r\n * 读取数据\r\n */\r\nexport function readSerial(options: ReadOptions) {\r\n  try {\r\n    // 获取串口实例\r\n    const serialPort = serialPorts.get(options.portId.toInt())\r\n    if (serialPort == null) {\r\n      const err = new SerialErrorImpl(10005)\r\n      err.errMsg = \"串口未打开，请先调用 openSerial\"\r\n      options.fail?.(err)\r\n      options.complete?.(err)\r\n      return\r\n    }\r\n\r\n    // 读取数据\r\n    const length = options.length ?? 1024\r\n    const timeout = options.timeout ?? 1000\r\n    const buffer = new ByteArray(length.toInt())\r\n    const bytesRead = serialPort.read(buffer, timeout.toInt())\r\n\r\n    // 数据格式转换\r\n    const format = options.format ?? 'hex'\r\n    let dataStr: string\r\n\r\n    if (format == 'hex') {\r\n      dataStr = bytesToHex(buffer, bytesRead)\r\n    } else if (format == 'base64') {\r\n      dataStr = bytesToBase64(buffer, bytesRead)\r\n    } else {\r\n      const err = new SerialErrorImpl(10007)\r\n      err.errMsg = \"不支持的数据格式: \" + format\r\n      options.fail?.(err)\r\n      options.complete?.(err)\r\n      return\r\n    }\r\n\r\n    // 返回成功结果\r\n    const res: ReadResult = {\r\n      errMsg: \"readSerial:ok\",\r\n      data: dataStr,\r\n      bytesRead: bytesRead\r\n    }\r\n    options.success?.(res)\r\n    options.complete?.(res)\r\n\r\n  } catch (e: Exception) {\r\n    const err = new SerialErrorImpl(10003)\r\n    err.errMsg = \"读取数据失败: \" + e.message\r\n    options.fail?.(err)\r\n    options.complete?.(err)\r\n  }\r\n}\r\n\r\n/**\r\n * 关闭串口\r\n */\r\nexport function closeSerial(options: CloseOptions) {\r\n  try {\r\n    // 获取串口实例\r\n    const serialPort = serialPorts.get(options.portId.toInt())\r\n    if (serialPort == null) {\r\n      const err = new SerialErrorImpl(10005)\r\n      err.errMsg = \"串口未打开\"\r\n      options.fail?.(err)\r\n      options.complete?.(err)\r\n      return\r\n    }\r\n\r\n    // 关闭串口\r\n    serialPort.close()\r\n\r\n    // 从池中移除\r\n    serialPorts.delete(options.portId.toInt())\r\n\r\n    // 返回成功结果\r\n    const res: CloseResult = {\r\n      errMsg: \"closeSerial:ok\"\r\n    }\r\n    options.success?.(res)\r\n    options.complete?.(res)\r\n\r\n  } catch (e: Exception) {\r\n    const err = new SerialErrorImpl(10004)\r\n    err.errMsg = \"关闭串口失败: \" + e.message\r\n    options.fail?.(err)\r\n    options.complete?.(err)\r\n  }\r\n}\r\n\r\n/**\r\n * 列举可用设备\r\n */\r\nexport function listDevices(options?: ListDevicesOptions) {\r\n  try {\r\n    const prefixes = options?.prefixes ?? [\"/dev/ttyS\", \"/dev/ttyUSB\", \"/dev/ttyAMA\"]\r\n    const devices: string[] = []\r\n\r\n    const devDir = File(\"/dev\")\r\n    if (devDir.exists() && devDir.isDirectory()) {\r\n      const files = devDir.listFiles()\r\n      if (files != null) {\r\n        const n: Int = files.size\r\n        for (let i = 0; i < n; i++) {\r\n          const idx: Int = i.toInt()\r\n          const file = files[idx]\r\n          const path = file.getAbsolutePath()\r\n          for (prefix in prefixes) {\r\n            if (path.startsWith(prefix)) {\r\n              devices.push(path)\r\n              break\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    // 返回成功结果\r\n    const res: ListDevicesResult = {\r\n      errMsg: \"listDevices:ok\",\r\n      devices: devices\r\n    }\r\n    options?.success?.(res)\r\n    options?.complete?.(res)\r\n\r\n  } catch (e: Exception) {\r\n    const err = new SerialErrorImpl(10006)\r\n    err.errMsg = \"列举设备失败: \" + e.message\r\n    options?.fail?.(err)\r\n    options?.complete?.(err)\r\n  }\r\n}\r\n\r\n/**\r\n * 获取插件版本\r\n */\r\nexport function getVersion(): string {\r\n  return \"1.0.0\"\r\n}\r\n","/**\r\n * 串口通信插件 - TypeScript 接口定义\r\n * \r\n * 基于 Kotlin SerialPort 库封装\r\n */\r\n\r\n// ==================== 类型定义 ====================\r\n\r\n/**\r\n * 数据位枚举\r\n */\r\nexport type DataBitsType = 5 | 6 | 7 | 8;\r\n\r\n/**\r\n * 停止位枚举\r\n */\r\nexport type StopBitsType = 1 | 2;\r\n\r\n/**\r\n * 校验位枚举\r\n */\r\nexport type ParityType = 'none' | 'odd' | 'even';\r\n\r\n/**\r\n * 串口配置参数\r\n */\r\nexport type SerialConfig = {\r\n  /** 波特率，默认 115200 */\r\n  baudRate?: number;\r\n  /** 数据位，默认 8 */\r\n  dataBits?: DataBitsType;\r\n  /** 停止位，默认 1 */\r\n  stopBits?: StopBitsType;\r\n  /** 校验位，默认 'none' */\r\n  parity?: ParityType;\r\n};\r\n\r\n/**\r\n * 打开串口的参数\r\n */\r\nexport type OpenOptions = {\r\n  /** 设备路径，如 \"/dev/ttyS0\" */\r\n  path: string;\r\n  /** 串口配置 */\r\n  config?: SerialConfig;\r\n  /** 成功回调 */\r\n  success?: (res: OpenResult) => void;\r\n  /** 失败回调 */\r\n  fail?: (err: SerialError) => void;\r\n  /** 完成回调 */\r\n  complete?: (res: any) => void;\r\n};\r\n\r\n/**\r\n * 打开成功的返回值\r\n */\r\nexport type OpenResult = {\r\n  errMsg: string;\r\n  /** 串口句柄 ID */\r\n  portId: number;\r\n};\r\n\r\n/**\r\n * 写数据参数\r\n */\r\nexport type WriteOptions = {\r\n  /** 串口句柄 ID */\r\n  portId: number;\r\n  /** 要写入的数据 (HEX 字符串或 Base64) */\r\n  data: string;\r\n  /** 数据格式: 'hex' | 'base64' */\r\n  format?: 'hex' | 'base64';\r\n  /** 超时时间(毫秒)，默认 1000 */\r\n  timeout?: number;\r\n  /** 成功回调 */\r\n  success?: (res: WriteResult) => void;\r\n  /** 失败回调 */\r\n  fail?: (err: SerialError) => void;\r\n  /** 完成回调 */\r\n  complete?: (res: any) => void;\r\n};\r\n\r\n/**\r\n * 写入成功的返回值\r\n */\r\nexport type WriteResult = {\r\n  errMsg: string;\r\n  /** 实际写入的字节数 */\r\n  bytesWritten: number;\r\n};\r\n\r\n/**\r\n * 读数据参数\r\n */\r\nexport type ReadOptions = {\r\n  /** 串口句柄 ID */\r\n  portId: number;\r\n  /** 期望读取的最大字节数，默认 1024 */\r\n  length?: number;\r\n  /** 返回数据格式: 'hex' | 'base64' */\r\n  format?: 'hex' | 'base64';\r\n  /** 超时时间(毫秒)，默认 1000 */\r\n  timeout?: number;\r\n  /** 成功回调 */\r\n  success?: (res: ReadResult) => void;\r\n  /** 失败回调 */\r\n  fail?: (err: SerialError) => void;\r\n  /** 完成回调 */\r\n  complete?: (res: any) => void;\r\n};\r\n\r\n/**\r\n * 读取成功的返回值\r\n */\r\nexport type ReadResult = {\r\n  errMsg: string;\r\n  /** 读取到的数据 (HEX 或 Base64 格式) */\r\n  data: string;\r\n  /** 实际读取的字节数 */\r\n  bytesRead: number;\r\n};\r\n\r\n/**\r\n * 关闭串口参数\r\n */\r\nexport type CloseOptions = {\r\n  /** 串口句柄 ID */\r\n  portId: number;\r\n  /** 成功回调 */\r\n  success?: (res: CloseResult) => void;\r\n  /** 失败回调 */\r\n  fail?: (err: SerialError) => void;\r\n  /** 完成回调 */\r\n  complete?: (res: any) => void;\r\n};\r\n\r\n/**\r\n * 关闭成功的返回值\r\n */\r\nexport type CloseResult = {\r\n  errMsg: string;\r\n};\r\n\r\n/**\r\n * 列举设备参数\r\n */\r\nexport type ListDevicesOptions = {\r\n  /** 设备路径前缀，默认 [\"/dev/ttyS\", \"/dev/ttyUSB\"] */\r\n  prefixes?: string[];\r\n  /** 成功回调 */\r\n  success?: (res: ListDevicesResult) => void;\r\n  /** 失败回调 */\r\n  fail?: (err: SerialError) => void;\r\n  /** 完成回调 */\r\n  complete?: (res: any) => void;\r\n};\r\n\r\n/**\r\n * 列举设备返回值\r\n */\r\nexport type ListDevicesResult = {\r\n  errMsg: string;\r\n  /** 设备路径列表 */\r\n  devices: string[];\r\n};\r\n\r\n// ==================== 错误码定义 ====================\r\n\r\n/**\r\n * 错误码\r\n * - 10001: 打开串口失败\r\n * - 10002: 写入数据失败\r\n * - 10003: 读取数据失败\r\n * - 10004: 关闭串口失败\r\n * - 10005: 串口未打开\r\n * - 10006: 参数错误\r\n * - 10007: 数据格式错误\r\n */\r\nexport type SerialErrorCode = 10001 | 10002 | 10003 | 10004 | 10005 | 10006 | 10007;\r\n\r\n/**\r\n * 错误对象\r\n */\r\nexport interface SerialError extends IUniError {\r\n  errCode: SerialErrorCode;\r\n}\r\n\r\n// ==================== API 方法定义 ====================\r\n\r\n/**\r\n * 打开串口\r\n */\r\nexport type OpenSerial = (options: OpenOptions) => void;\r\n\r\n/**\r\n * 写入数据\r\n */\r\nexport type WriteSerial = (options: WriteOptions) => void;\r\n\r\n/**\r\n * 读取数据\r\n */\r\nexport type ReadSerial = (options: ReadOptions) => void;\r\n\r\n/**\r\n * 关闭串口\r\n */\r\nexport type CloseSerial = (options: CloseOptions) => void;\r\n\r\n/**\r\n * 列举可用设备\r\n */\r\nexport type ListDevices = (options?: ListDevicesOptions) => void;\r\n\r\n/**\r\n * 获取插件版本\r\n */\r\nexport type GetVersion = () => string;\r\n","/**\r\n * 错误码定义\r\n */\r\nimport { SerialErrorCode, SerialError } from \"./interface.uts\"\r\n\r\n/**\r\n * 错误主题\r\n */\r\nexport const UniErrorSubject = 'wzl-serialbridge';\r\n\r\n/**\r\n * 错误信息映射\r\n */\r\nexport const SerialUniErrors: Map<SerialErrorCode, string> = new Map([\r\n  [10001, '打开串口失败'],\r\n  [10002, '写入数据失败'],\r\n  [10003, '读取数据失败'],\r\n  [10004, '关闭串口失败'],\r\n  [10005, '串口未打开'],\r\n  [10006, '参数错误'],\r\n  [10007, '数据格式错误'],\r\n]);\r\n\r\n/**\r\n * 错误对象实现\r\n */\r\nexport class SerialErrorImpl extends UniError implements SerialError {\r\n  override errCode: SerialErrorCode;\r\n\r\n  constructor(errCode: SerialErrorCode) {\r\n    super();\r\n    this.errSubject = UniErrorSubject;\r\n    this.errCode = errCode;\r\n    this.errMsg = SerialUniErrors.get(errCode) ?? \"\";\r\n  }\r\n}\r\n"],"names":[],"mappings":"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"}